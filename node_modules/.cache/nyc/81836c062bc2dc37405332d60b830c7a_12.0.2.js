'use strict';var cov_e69aj3kr5=function(){var path="/Users/adam/Documents/GitHub/unit-test_examples/lib/createTables.js",hash="31d3a2576477b5d3beb180fdbb966abeb0ad2e31",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/adam/Documents/GitHub/unit-test_examples/lib/createTables.js",statementMap:{"0":{start:{line:3,column:14},end:{line:3,column:30}},"1":{start:{line:4,column:10},end:{line:4,column:27}},"2":{start:{line:6,column:18},end:{line:6,column:20}},"3":{start:{line:8,column:0},end:{line:38,column:2}},"4":{start:{line:9,column:2},end:{line:9,column:38}},"5":{start:{line:10,column:2},end:{line:10,column:26}},"6":{start:{line:12,column:20},end:{line:12,column:37}},"7":{start:{line:14,column:2},end:{line:37,column:5}},"8":{start:{line:15,column:4},end:{line:36,column:5}},"9":{start:{line:16,column:6},end:{line:16,column:54}},"10":{start:{line:17,column:6},end:{line:25,column:9}},"11":{start:{line:18,column:8},end:{line:21,column:9}},"12":{start:{line:19,column:10},end:{line:19,column:92}},"13":{start:{line:20,column:10},end:{line:20,column:33}},"14":{start:{line:23,column:8},end:{line:23,column:76}},"15":{start:{line:24,column:8},end:{line:24,column:65}},"16":{start:{line:27,column:6},end:{line:35,column:9}},"17":{start:{line:28,column:8},end:{line:31,column:9}},"18":{start:{line:29,column:10},end:{line:29,column:88}},"19":{start:{line:30,column:10},end:{line:30,column:31}},"20":{start:{line:33,column:8},end:{line:33,column:76}},"21":{start:{line:34,column:8},end:{line:34,column:65}},"22":{start:{line:40,column:0},end:{line:58,column:2}},"23":{start:{line:41,column:15},end:{line:41,column:24}},"24":{start:{line:43,column:2},end:{line:57,column:4}},"25":{start:{line:45,column:6},end:{line:53,column:9}},"26":{start:{line:46,column:8},end:{line:48,column:9}},"27":{start:{line:47,column:10},end:{line:47,column:31}},"28":{start:{line:50,column:8},end:{line:50,column:40}},"29":{start:{line:52,column:8},end:{line:52,column:62}},"30":{start:{line:55,column:10},end:{line:55,column:29}},"31":{start:{line:56,column:11},end:{line:56,column:24}},"32":{start:{line:60,column:0},end:{line:62,column:2}},"33":{start:{line:61,column:2},end:{line:61,column:141}},"34":{start:{line:61,column:54},end:{line:61,column:129}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:24},end:{line:8,column:25}},loc:{start:{line:8,column:69},end:{line:38,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:22},end:{line:14,column:23}},loc:{start:{line:14,column:37},end:{line:37,column:3}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:40},end:{line:17,column:41}},loc:{start:{line:17,column:51},end:{line:25,column:7}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:24},end:{line:27,column:25}},loc:{start:{line:27,column:33},end:{line:35,column:7}},line:27},"4":{name:"(anonymous_4)",decl:{start:{line:40,column:27},end:{line:40,column:28}},loc:{start:{line:40,column:57},end:{line:58,column:1}},line:40},"5":{name:"(anonymous_5)",decl:{start:{line:44,column:4},end:{line:44,column:5}},loc:{start:{line:44,column:18},end:{line:54,column:5}},line:44},"6":{name:"(anonymous_6)",decl:{start:{line:45,column:26},end:{line:45,column:27}},loc:{start:{line:45,column:41},end:{line:53,column:7}},line:45},"7":{name:"(anonymous_7)",decl:{start:{line:55,column:4},end:{line:55,column:5}},loc:{start:{line:55,column:10},end:{line:55,column:29}},line:55},"8":{name:"(anonymous_8)",decl:{start:{line:56,column:4},end:{line:56,column:5}},loc:{start:{line:56,column:11},end:{line:56,column:24}},line:56},"9":{name:"(anonymous_9)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:47},end:{line:62,column:1}},line:60},"10":{name:"(anonymous_10)",decl:{start:{line:61,column:35},end:{line:61,column:36}},loc:{start:{line:61,column:54},end:{line:61,column:129}},line:61}},branchMap:{"0":{loc:{start:{line:9,column:18},end:{line:9,column:37}},type:"binary-expr",locations:[{start:{line:9,column:18},end:{line:9,column:31}},{start:{line:9,column:35},end:{line:9,column:37}}],line:9},"1":{loc:{start:{line:10,column:12},end:{line:10,column:25}},type:"binary-expr",locations:[{start:{line:10,column:12},end:{line:10,column:19}},{start:{line:10,column:23},end:{line:10,column:25}}],line:10},"2":{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:15,column:4},end:{line:36,column:5}}],line:15},"3":{loc:{start:{line:15,column:8},end:{line:15,column:45}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:22}},{start:{line:15,column:26},end:{line:15,column:45}}],line:15},"4":{loc:{start:{line:18,column:8},end:{line:21,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:21,column:9}},{start:{line:18,column:8},end:{line:21,column:9}}],line:18},"5":{loc:{start:{line:28,column:8},end:{line:31,column:9}},type:"if",locations:[{start:{line:28,column:8},end:{line:31,column:9}},{start:{line:28,column:8},end:{line:31,column:9}}],line:28},"6":{loc:{start:{line:46,column:8},end:{line:48,column:9}},type:"if",locations:[{start:{line:46,column:8},end:{line:48,column:9}},{start:{line:46,column:8},end:{line:48,column:9}}],line:46},"7":{loc:{start:{line:52,column:29},end:{line:52,column:60}},type:"binary-expr",locations:[{start:{line:52,column:29},end:{line:52,column:52}},{start:{line:52,column:56},end:{line:52,column:60}}],line:52}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const async=(cov_e69aj3kr5.s[0]++,require('async'));const _=(cov_e69aj3kr5.s[1]++,require('lodash'));const internals=(cov_e69aj3kr5.s[2]++,{});cov_e69aj3kr5.s[3]++;internals.createTable=(model,globalOptions,options,callback)=>{cov_e69aj3kr5.f[0]++;cov_e69aj3kr5.s[4]++;globalOptions=(cov_e69aj3kr5.b[0][0]++,globalOptions)||(cov_e69aj3kr5.b[0][1]++,{});cov_e69aj3kr5.s[5]++;options=(cov_e69aj3kr5.b[1][0]++,options)||(cov_e69aj3kr5.b[1][1]++,{});const tableName=(cov_e69aj3kr5.s[6]++,model.tableName());cov_e69aj3kr5.s[7]++;model.describeTable((err,data)=>{cov_e69aj3kr5.f[1]++;cov_e69aj3kr5.s[8]++;if((cov_e69aj3kr5.b[3][0]++,_.isNull(data))||(cov_e69aj3kr5.b[3][1]++,_.isUndefined(data))){cov_e69aj3kr5.b[2][0]++;cov_e69aj3kr5.s[9]++;model.log.info('creating table: %s',tableName);cov_e69aj3kr5.s[10]++;return model.createTable(options,error=>{cov_e69aj3kr5.f[2]++;cov_e69aj3kr5.s[11]++;if(error){cov_e69aj3kr5.b[4][0]++;cov_e69aj3kr5.s[12]++;model.log.warn({err:error},'failed to create table %s: %s',tableName,error);cov_e69aj3kr5.s[13]++;return callback(error);}else{cov_e69aj3kr5.b[4][1]++;}cov_e69aj3kr5.s[14]++;model.log.info('waiting for table: %s to become ACTIVE',tableName);cov_e69aj3kr5.s[15]++;internals.waitTillActive(globalOptions,model,callback);});}else{cov_e69aj3kr5.b[2][1]++;cov_e69aj3kr5.s[16]++;model.updateTable(err=>{cov_e69aj3kr5.f[3]++;cov_e69aj3kr5.s[17]++;if(err){cov_e69aj3kr5.b[5][0]++;cov_e69aj3kr5.s[18]++;model.log.warn({err:err},'failed to update table %s: %s',tableName,err);cov_e69aj3kr5.s[19]++;return callback(err);}else{cov_e69aj3kr5.b[5][1]++;}cov_e69aj3kr5.s[20]++;model.log.info('waiting for table: %s to become ACTIVE',tableName);cov_e69aj3kr5.s[21]++;internals.waitTillActive(globalOptions,model,callback);});}});};cov_e69aj3kr5.s[22]++;internals.waitTillActive=(options,model,callback)=>{cov_e69aj3kr5.f[4]++;let status=(cov_e69aj3kr5.s[23]++,'PENDING');cov_e69aj3kr5.s[24]++;async.doWhilst(callback=>{cov_e69aj3kr5.f[5]++;cov_e69aj3kr5.s[25]++;model.describeTable((err,data)=>{cov_e69aj3kr5.f[6]++;cov_e69aj3kr5.s[26]++;if(err){cov_e69aj3kr5.b[6][0]++;cov_e69aj3kr5.s[27]++;return callback(err);}else{cov_e69aj3kr5.b[6][1]++;}cov_e69aj3kr5.s[28]++;status=data.Table.TableStatus;cov_e69aj3kr5.s[29]++;setTimeout(callback,(cov_e69aj3kr5.b[7][0]++,options.pollingInterval)||(cov_e69aj3kr5.b[7][1]++,1000));});},()=>{cov_e69aj3kr5.f[7]++;cov_e69aj3kr5.s[30]++;return status!=='ACTIVE';},err=>{cov_e69aj3kr5.f[8]++;cov_e69aj3kr5.s[31]++;return callback(err);});};cov_e69aj3kr5.s[32]++;module.exports=(models,config,callback)=>{cov_e69aj3kr5.f[9]++;cov_e69aj3kr5.s[33]++;async.eachSeries(_.keys(models),(key,callback)=>{cov_e69aj3kr5.f[10]++;cov_e69aj3kr5.s[34]++;return internals.createTable(models[key],config.$dynogels,config[key],callback);},callback);};