

  LoginController
    isValidUserId
beforeEach
      ✓ should return true if valid user id
beforeEach
      ✓ should return false if invalid user id
    isValidUserIdAsync
beforeEach
      ✓ should return true if valid user id
    isAuthorizedPromise
beforeEach
      ✓ should return true if valid user id

  Batch
    #getItems
beforeEach
      ✓ should get items by hash key
beforeEach
      ✓ should get items by hash and range key
beforeEach
      ✓ should not modify passed in keys (257ms)
beforeEach
      ✓ should get items by hash key with consistent read
beforeEach
      ✓ should get items by hash key with projection expression
beforeEach
      ✓ should get items when encounters retryable excpetion
beforeEach
      ✓ should get unprocessed keys
beforeEach
      ✓ should return error

  expressions
    #parse
beforeEach
      ✓ should parse single SET action
beforeEach
      ✓ should parse multiple SET actions
beforeEach
      ✓ should parse ADD action
beforeEach
      ✓ should parse REMOVE action
beforeEach
      ✓ should parse DELETE action
beforeEach
      ✓ should parse ADD and SET actions
beforeEach
      ✓ should parse multiple actions
beforeEach
      ✓ should return null actions when given null
beforeEach
      ✓ should return null actions when given empty string
    #serializeUpdateExpression
beforeEach
      ✓ should return single SET action
beforeEach
      ✓ should return multiple SET actions
beforeEach
      ✓ should return SET and ADD actions
beforeEach
      ✓ should return single DELETE action
beforeEach
      ✓ should return single REMOVE action
beforeEach
      ✓ should return single REMOVE action when value is set to empty string
beforeEach
      ✓ should return empty actions when passed empty object
beforeEach
      ✓ should return empty actions when passed null
    #stringify
beforeEach
      ✓ should return single SET action
beforeEach
      ✓ should return single SET action when param is a string
beforeEach
      ✓ should return single SET action when other actions are null
beforeEach
      ✓ should return multiple SET actions
beforeEach
      ✓ should return SET and ADD actions
beforeEach
      ✓ should return stringified ALL actions
beforeEach
      ✓ should return empty string when passed empty actions
beforeEach
      ✓ should return empty string when passed null actions
beforeEach
      ✓ should return empty string when passed empty object
beforeEach
      ✓ should return empty string when passed null
beforeEach
      ✓ should result from stringifying a parsed string should equal original string

  dynogels
    #define
beforeEach
      ✓ should return model
beforeEach
      ✓ should throw when using old api
beforeEach
      ✓ should have config method
beforeEach
      ✓ should configure table name as accounts
beforeEach
      ✓ should return new account item
beforeEach
      ✓ should have validate method
    #models
beforeEach
      ✓ should be empty
beforeEach
      ✓ should contain single model
    #model
beforeEach
      ✓ should return defined model
beforeEach
      ✓ should return null
    model config
beforeEach
      ✓ should configure set dynamodb driver
beforeEach
      ✓ should configure set dynamodb driver
beforeEach
      ✓ should set document client
beforeEach
      ✓ should globally set dynamodb driver for all models
beforeEach
      ✓ should continue to use globally set dynamodb driver
    #createTables
beforeEach
      ✓ should create single definied model
beforeEach
      ✓ should return error
beforeEach
      ✓ should create model without callback
beforeEach
      ✓ should return error when waiting for table to become active

  item
beforeEach
    ✓ JSON.stringify should only serialize attrs
    #save
beforeEach
      ✓ should return error
    #update
beforeEach
      ✓ should return item
beforeEach
      ✓ should return error
beforeEach
      ✓ should return null

  ParallelScan
beforeEach
    ✓ should return error
beforeEach
    ✓ should stream error

  Query
    #exec
beforeEach
      ✓ should run query against table
beforeEach
      ✓ should return error
beforeEach
      ✓ should stream error
beforeEach
      ✓ should stream data after handling retryable error (1008ms)
    #limit
beforeEach
      ✓ should set the limit
beforeEach
      ✓ should throw when limit is zero
    #filterExpression
beforeEach
      ✓ should set filter expression
    #expressionAttributeValues
beforeEach
      ✓ should set expression attribute values
    #expressionAttributeNames
beforeEach
      ✓ should set expression attribute names
    #projectionExpression
beforeEach
      ✓ should set projection expression
    #usingIndex
beforeEach
      ✓ should set the index name to use
beforeEach
      ✓ should create key condition for global index hash key
    #consistentRead
beforeEach
      ✓ should set Consistent Read to true
beforeEach
      ✓ should set Consistent Read to true when passing no args
beforeEach
      ✓ should set Consistent Read to false
    #attributes
beforeEach
      ✓ should set array attributes to get
beforeEach
      ✓ should set single attribute to get
    #order
beforeEach
      ✓ should set scan index forward to true
beforeEach
      ✓ should set scan index forward to false
    #startKey
beforeEach
      ✓ should set start Key
    #select
beforeEach
      ✓ should set select Key
    #ReturnConsumedCapacity
beforeEach
      ✓ should set return consumed capacity Key to passed in value
beforeEach
      ✓ should set return consumed capacity Key
    #where
beforeEach
      ✓ should have hash key and range key equals clauses
beforeEach
      ✓ should have equals clause
beforeEach
      ✓ should have less than or equal clause
beforeEach
      ✓ should have less than clause
beforeEach
      ✓ should have greater than or equal clause
beforeEach
      ✓ should have greater than clause
beforeEach
      ✓ should have begins with clause
beforeEach
      ✓ should have between clause
beforeEach
      ✓ should support multiple clauses on same attribute
    #filter
beforeEach
      ✓ should have equals clause
beforeEach
      ✓ should have exists clause
beforeEach
      ✓ should have not exists clause
beforeEach
      ✓ should have between clause
beforeEach
      ✓ should have IN clause
beforeEach
      ✓ should support multiple filters on same attribute
beforeEach
      ✓ should support Map.Attr document paths
    #loadAll
beforeEach
      ✓ should set load all option to true

  Scan
    #exec
beforeEach
      ✓ should call run scan on table
beforeEach
      ✓ should return LastEvaluatedKey
beforeEach
      ✓ should return error
beforeEach
      ✓ should run scan after encountering a retryable exception
    #limit
beforeEach
      ✓ should set the limit
beforeEach
      ✓ should throw when limit is zero
    #attributes
beforeEach
      ✓ should set array attributes to get
beforeEach
      ✓ should set single attribute to get
    #startKey
beforeEach
      ✓ should set start Key to hash
beforeEach
      ✓ should set start Key to hash + range
    #select
beforeEach
      ✓ should set select Key
    #ReturnConsumedCapacity
beforeEach
      ✓ should set return consumed capacity Key to passed in value
beforeEach
      ✓ should set return consumed capacity Key
    #segment
beforeEach
      ✓ should set both segment and total segments keys
    #where
beforeEach
      ✓ should have equals clause
beforeEach
      ✓ should have not equals clause
beforeEach
      ✓ should have less than or equal clause
beforeEach
      ✓ should have less than clause
beforeEach
      ✓ should have greater than or equal clause
beforeEach
      ✓ should have greater than clause
beforeEach
      ✓ should have not null clause
beforeEach
      ✓ should have null clause
beforeEach
      ✓ should have contains clause
beforeEach
      ✓ should not pass a number set when making contains call
beforeEach
      ✓ should have not contains clause
beforeEach
      ✓ should have in clause
beforeEach
      ✓ should have begins with clause
beforeEach
      ✓ should have between clause
beforeEach
      ✓ should have multiple filters
beforeEach
      ✓ should have multiple filters on the same attribute
beforeEach
      ✓ should convert date to iso string
beforeEach
      ✓ should support Map.Attr document paths
    #loadAll
beforeEach
      ✓ should set load all option to true
    #filterExpression
beforeEach
      ✓ should set filter expression
    #expressionAttributeValues
beforeEach
      ✓ should set expression attribute values
    #expressionAttributeNames
beforeEach
      ✓ should set expression attribute names
    #projectionExpression
beforeEach
      ✓ should set projection expression

  schema
    setup
beforeEach
      ✓ should set hash key
beforeEach
      ✓ should set hash and range key
beforeEach
      ✓ should set table name to string
beforeEach
      ✓ should set table name to function
beforeEach
      ✓ should add timestamps to schema
beforeEach
      ✓ should add timestamps with custom names to schema
beforeEach
      ✓ should only add createdAt timestamp 
beforeEach
      ✓ should only add updatedAt timestamp 
beforeEach
      ✓ should only add custom created timestamp 
beforeEach
      ✓ should throw error when hash key is not present
beforeEach
      ✓ should setup local secondary index when both hash and range keys are given
beforeEach
      ✓ should setup local secondary index when only range key is given
beforeEach
      ✓ should throw when local index rangeKey isnt present
beforeEach
      ✓ should throw when local index hashKey does not match the tables hashKey
beforeEach
      ✓ should setup global index
beforeEach
      ✓ should throw when global index hashKey is not present
beforeEach
      ✓ should parse schema data types
    #stringSet
beforeEach
      ✓ should set as string set
    #numberSet
beforeEach
      ✓ should set as number set
    #binarySet
beforeEach
      ✓ should set as binary set
    #uuid
beforeEach
      ✓ should set as uuid with default uuid function
    #timeUUID
beforeEach
      ✓ should set as TimeUUID with default v1 uuid function
    #validate
beforeEach
      ✓ should return no err for string
beforeEach
      ✓ should return no error for valid date object
beforeEach
      ✓ should pass through validation options
    #applyDefaults
beforeEach
      ✓ should apply default values
beforeEach
      ✓ should return result of default functions

  Serializer
    #buildKeys
beforeEach
      ✓ should handle string hash key
beforeEach
      ✓ should handle number hash key
beforeEach
      ✓ should handle date hash key
beforeEach
      ✓ should handle string hash and range key
beforeEach
      ✓ should handle number hash and range key
beforeEach
      ✓ should handle object containing the hash key
beforeEach
      ✓ should handle local secondary index keys
beforeEach
      ✓ should handle global secondary index keys
beforeEach
      ✓ should handle boolean global secondary index key
    #serializeItem
beforeEach
      ✓ should serialize string attribute
beforeEach
      ✓ should serialize number attribute
beforeEach
      ✓ should serialize binary attribute
beforeEach
      ✓ should serialize number attribute with value zero
beforeEach
      ✓ should serialize boolean attribute
beforeEach
      ✓ should serialize date attribute
beforeEach
      ✓ should serialize string set attribute
beforeEach
      ✓ should serialize single string set attribute
beforeEach
      ✓ should number set attribute
beforeEach
      ✓ should single number set attribute
beforeEach
      ✓ should serialize binary set attribute
beforeEach
      ✓ should serialize single binary set attribute
beforeEach
      ✓ should serialize uuid attribute
beforeEach
      ✓ should serialize TimeUUId attribute
beforeEach
      ✓ should return null
beforeEach
      ✓ should serialize string attribute for expected
beforeEach
      ✓ should serialize string attribute for expected exists false
beforeEach
      ✓ should serialize nested attributes
beforeEach
      ✓ should return empty when serializing null value
    #deserializeItem
beforeEach
      ✓ should return string value
beforeEach
      ✓ should return values in StringSet
beforeEach
      ✓ should return values in NumberSet
beforeEach
      ✓ should return null when item is null
beforeEach
      ✓ should return nested values
    #serializeItemForUpdate
beforeEach
      ✓ should serialize string attribute
beforeEach
      ✓ should serialize number attribute
beforeEach
      ✓ should serialize three attributes
beforeEach
      ✓ should serialize null value to a DELETE action
beforeEach
      ✓ should not serialize hashkey attribute
beforeEach
      ✓ should not serialize hashkey and rangeKey attributes
beforeEach
      ✓ should serialize add operations
beforeEach
      ✓ should serialize delete operations

  table
    #get
beforeEach
      ✓ should get item by hash key
beforeEach
      ✓ should get item by hash and range key
beforeEach
      ✓ should get item by hash key and options
beforeEach
      ✓ should get item by hashkey, range key and options
beforeEach
      ✓ should get item from dynamic table by hash key
beforeEach
      ✓ should return error
    #create
beforeEach
      ✓ should create valid item
beforeEach
      ✓ should call apply defaults
beforeEach
      ✓ should omit null values
beforeEach
      ✓ should omit empty values
beforeEach
      ✓ should create item with createdAt timestamp
beforeEach
      ✓ should create item with custom createdAt attribute name
beforeEach
      ✓ should create item without createdAt param
beforeEach
      ✓ should create item with expected option
beforeEach
      ✓ should create item with no callback
beforeEach
      ✓ should return validation error
beforeEach
      ✓ should fail with custom errors specified in schema
beforeEach
      ✓ should create item with condition expression on hashkey when overwrite flag is false
beforeEach
      ✓ should create item with condition expression on hash and range key when overwrite flag is false
beforeEach
      ✓ should create item without condition expression when overwrite flag is true
    #update
beforeEach
      ✓ should update valid item
beforeEach
      ✓ should accept falsy key and range values
beforeEach
      ✓ should update with passed in options
beforeEach
      ✓ should update merge update expressions when passed in as options
beforeEach
      ✓ should update valid item without a callback
beforeEach
      ✓ should return error
beforeEach
      ✓ should handle errors regarding invalid expressions
    #query
beforeEach
      ✓ should return query object
    #scan
beforeEach
      ✓ should return scan object
    #destroy
beforeEach
      ✓ should destroy valid item
beforeEach
      ✓ should destroy valid item with falsy hash and range keys
beforeEach
      ✓ should take optional params
beforeEach
      ✓ should parse and return attributes
beforeEach
      ✓ should accept hash and range key
beforeEach
      ✓ should accept hashkey rangekey and options
beforeEach
      ✓ should serialize expected option
beforeEach
      ✓ should call delete item without callback
beforeEach
      ✓ should call delete item with hash key, options and no callback
    #describeTable
beforeEach
      ✓ should make describe table request
    #updateTable
beforeEach
      ✓ should make update table request
beforeEach
      ✓ should make update table request without callback
    #deleteTable
beforeEach
      ✓ should make delete table request
beforeEach
      ✓ should make delete table request without callback
    #tableName
beforeEach
      ✓ should return given name
beforeEach
      ✓ should return table name set on schema
beforeEach
      ✓ should return table name returned from function on schema
    #dynamoCreateTableParams
beforeEach
      ✓ should make table arguments with hash key
beforeEach
      ✓ should make table arguments with range key
beforeEach
      ✓ should make table arguments with stream specification
beforeEach
      ✓ should make table arguments with secondary index
beforeEach
      ✓ should make table arguments with global secondary index
beforeEach
      ✓ should make table arguments with global secondary index
    #createTable
beforeEach
`sandbox.create()` is deprecated. Use default sandbox at `sinon.sandbox` or create new sandboxes with `sinon.createSandbox()`
      ✓ should call dynamo.createTable with the dynamoCreateTableParams result
    #describeTable
beforeEach
      ✓ should make describe table request
    #updateTable
beforeEach
      ✓ should make update table request
beforeEach
      ✓ should make update table request without callback
    #deleteTable
beforeEach
      ✓ should make delete table request
beforeEach
      ✓ should make delete table request without callback
    #tableName
beforeEach
      ✓ should return given name
beforeEach
      ✓ should return table name set on schema
beforeEach
      ✓ should return table name returned from function on schema
    hooks
beforeEach
      ✓ #destroy should call after hook
      #create
beforeEach
        ✓ should call before hooks
beforeEach
        ✓ should return error when before hook returns error
beforeEach
        ✓ should call after hook
      #update
beforeEach
        ✓ should call before hook
beforeEach
        ✓ should return error when before hook returns error
beforeEach
        ✓ should call after hook
    #validate
beforeEach
      ✓ should succeed for empty item when nothing is required
beforeEach
      ✓ should succeed with required items
beforeEach
      ✓ should fail when missing required string field
beforeEach
      ✓ should fail when giving numbers to string types
beforeEach
      ✓ should fail when giving strings to number types


  284 passing (2s)

--------------------------------|----------|----------|----------|----------|-------------------|
File                            |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
--------------------------------|----------|----------|----------|----------|-------------------|
All files                       |     92.9 |    83.33 |    93.83 |    92.82 |                   |
 unit-test_examples             |      100 |      100 |      100 |      100 |                   |
  index.js                      |      100 |      100 |      100 |      100 |                   |
 unit-test_examples/controllers |      100 |      100 |      100 |      100 |                   |
  login.controller.js           |      100 |      100 |      100 |      100 |                   |
 unit-test_examples/lib         |    92.85 |    83.33 |    93.62 |    92.76 |                   |
  batch.js                      |      100 |      100 |      100 |      100 |                   |
  createTables.js               |    82.86 |       75 |    90.91 |    82.35 | 27,28,29,30,33,34 |
  expressions.js                |    99.06 |    97.96 |      100 |    99.03 |               137 |
  index.js                      |    97.09 |    97.22 |    88.89 |    97.09 |        44,107,140 |
  item.js                       |       80 |       50 |    72.73 |       80 |... 79,82,83,85,93 |
  parallelScan.js               |    87.76 |    64.29 |     87.5 |    87.76 | 47,48,49,65,75,76 |
  query-base.js                 |      100 |      100 |      100 |      100 |                   |
  query.js                      |    96.59 |    81.25 |    95.45 |    96.47 |       169,170,173 |
  scan.js                       |      100 |    83.33 |      100 |      100 |                52 |
  schema.js                     |      100 |    95.65 |      100 |      100 |           132,138 |
  serializer.js                 |      100 |    95.18 |      100 |      100 |   112,116,122,141 |
  table.js                      |    87.11 |    76.15 |     87.5 |    87.24 |... 53,759,760,763 |
  utils.js                      |    87.78 |    80.33 |      100 |    87.21 |... 60,161,162,164 |
--------------------------------|----------|----------|----------|----------|-------------------|
